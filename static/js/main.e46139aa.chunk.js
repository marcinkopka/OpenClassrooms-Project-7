(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,function(e,a,t){e.exports={Filter:"Filter_Filter__1i7ZJ",Title:"Filter_Title__1lkiW",Min:"Filter_Min__1OcO9",Max:"Filter_Max__SFqVo",Apply:"Filter_Apply__2BsPY",Label:"Filter_Label__1RfH5",Star:"Filter_Star__1zSfy",Less:"Filter_Less__lSha1",Value:"Filter_Value__1Ul5W",More:"Filter_More__1hh0H"}},function(e,a,t){e.exports={AddReview:"AddReview_AddReview__3M8YE",Fields:"AddReview_Fields__3c2G-",Names:"AddReview_Names__2V0q-",FirstName:"AddReview_FirstName__1yze8",LastName:"AddReview_LastName__Ko3vz",Review:"AddReview_Review__2Qk9U",Buttons:"AddReview_Buttons__2Giii",Add:"AddReview_Add__zEYg_",Cancel:"AddReview_Cancel__1zuVp",UserRating:"AddReview_UserRating__IIGwK",Description:"AddReview_Description__c9s_J",Stars:"AddReview_Stars__3zSQY",StarRated:"AddReview_StarRated__3EcCR",StarNotRated:"AddReview_StarNotRated__JuHbt"}},,function(e,a,t){e.exports={RestaurantDetails:"RestaurantDetails_RestaurantDetails__2IsrY",Title:"RestaurantDetails_Title__tm5zD",NameAndClose:"RestaurantDetails_NameAndClose__CakhO",Name:"RestaurantDetails_Name__4s-2o",Close:"RestaurantDetails_Close__1fn3A",AverageRating:"RestaurantDetails_AverageRating__2RrDf",StreetVievContainer:"RestaurantDetails_StreetVievContainer__PFrBz",AddressInfo:"RestaurantDetails_AddressInfo__x-Zhz",PhoneInfo:"RestaurantDetails_PhoneInfo__3ivBq",WebsiteInfo:"RestaurantDetails_WebsiteInfo__IFW90"}},function(e,a,t){e.exports={Layout:"Layout_Layout__2qyTg",Header:"Layout_Header__1zkcm",Title:"Layout_Title__Ryc12",Main:"Layout_Main__1T67F",Position:"Layout_Position__3z6wW",Marker:"Layout_Marker__359e1",Description:"Layout_Description__1Kc_Z",Info:"Layout_Info__1Zhf6",InfoContent:"Layout_InfoContent__3EOzm"}},function(e,a,t){e.exports={ReviewContainer:"Review_ReviewContainer__20Rhq",AuthorPhoto:"Review_AuthorPhoto__3YLhJ",AuthorLetterContainer:"Review_AuthorLetterContainer__3krss",AuthorLetter:"Review_AuthorLetter__3RQqH",Review:"Review_Review__1zVYO",AuthorName:"Review_AuthorName__7nHZf",ReviewRating:"Review_ReviewRating__2JkC7",ReviewText:"Review_ReviewText__3GBRk"}},function(e,a,t){e.exports={ListItem:"ListItem_ListItem__30QVX",PlaceDescription:"ListItem_PlaceDescription__13aNy",PlaceName:"ListItem_PlaceName__3VvlV",PlaceVicinity:"ListItem_PlaceVicinity__2bW92",AverageRating:"ListItem_AverageRating__3CExo",PlacePhoto:"ListItem_PlacePhoto__22RUd"}},function(e,a,t){e.exports={Rating:"Rating_Rating__1YSU7",RatingNumber:"Rating_RatingNumber__2vxhM",RatingStars:"Rating_RatingStars__DTCa6",StarsRatingSprite:"Rating_StarsRatingSprite__3SVGD",StarsRatingSpriteRating:"Rating_StarsRatingSpriteRating__3HNCa",NoRating:"Rating_NoRating__1iC_Z"}},,,,,,,function(e,a,t){e.exports={AddRestaurant:"AddRestaurant_AddRestaurant__34mFQ",Fields:"AddRestaurant_Fields__1sTcu",Buttons:"AddRestaurant_Buttons__37SyJ",Add:"AddRestaurant_Add__Osi-S",Cancel:"AddRestaurant_Cancel__2QO4i"}},function(e,a,t){e.exports={MapContainer:"MapContainer_MapContainer__2VdW7",Map:"MapContainer_Map__3LOHl",SideBar:"MapContainer_SideBar__3x1eI",GeoInfo:"MapContainer_GeoInfo__1lM9z"}},function(e,a,t){e.exports={List:"List_List__1Folm",NotFound:"List_NotFound__37jAh"}},function(e,a,t){e.exports={Reviews:"Reviews_Reviews__E6PMY",Header:"Reviews_Header__1WUsq"}},,,function(e,a,t){e.exports={App:"App_App__2I4hq"}},function(e,a,t){e.exports=t.p+"static/media/utensils-solid.631542a7.svg"},function(e,a,t){e.exports=t.p+"static/media/times-circle-regular.550b0f92.svg"},function(e,a,t){e.exports=t.p+"static/media/map-marker-alt-solid.c8fed0b3.svg"},function(e,a,t){e.exports=t.p+"static/media/phone-solid.daf00ead.svg"},function(e,a,t){e.exports=t.p+"static/media/at-solid.a7dcae6f.svg"},function(e,a,t){e.exports={Modal:"Modal_Modal__TH54B"}},function(e,a,t){e.exports={Backdrop:"Backdrop_Backdrop__2HvAg"}},function(e,a,t){e.exports=t(36)},,,,,function(e,a,t){},function(e){e.exports={jsonRestaurants:[{place_id:1,name:"Alfa",vicinity:"23 New Briggate, Leeds",lat:53.8001578474205,lng:-1.5422377830176401,placeDetails:{formatted_phone_number:"01132440358",reviews:[{author_name:"Tom Hardy",rating:1,text:"Great! But not many veggie options."},{author_name:"John Hanks",rating:1,text:"My favorite restaurant!"}]}},{place_id:2,name:"Beta",vicinity:"25-27 The Headrow, Leeds",lat:53.7988841940848,lng:-1.541218543591981,placeDetails:{formatted_phone_number:"01135489651",reviews:[{author_name:"Jennefer Stone",rating:2,text:"Tiny pizzeria next to Sacre Coeur."},{author_name:"Joan Anslet",rating:2,text:"Meh, it was fine."}]}}]}},function(e,a,t){"use strict";t.r(a);var n,i,s,r,l=t(0),o=t.n(l),d=t(20),c=t.n(d),u=(t(34),t(10)),m=t(11),g=t(13),v=t(12),p=t(14),w=t(21),R=t.n(w),f=t(5),_=t.n(f),h=t(9),D=t(3),E=t(16),b=t.n(E),S=t(1),N=t.n(S),A=function(e){return o.a.createElement("div",{className:N.a.Filter},o.a.createElement("div",{className:N.a.Title},o.a.createElement("p",null,"Display restaurants")),o.a.createElement("div",{className:N.a.Min},o.a.createElement("div",{className:N.a.Label},"Min"),o.a.createElement("button",{className:N.a.Less,disabled:e.filterButtonsDisabled.minLess,onClick:e.updateFiltersHandler,id:"minLess"},"Less"),o.a.createElement("div",{className:N.a.Value},e.filterData.filterMin),o.a.createElement("button",{className:N.a.More,disabled:e.filterButtonsDisabled.minMore,onClick:e.updateFiltersHandler,id:"minMore"},"More"),o.a.createElement("div",{className:N.a.Star})),o.a.createElement("div",{className:N.a.Max},o.a.createElement("div",{className:N.a.Label},"Max"),o.a.createElement("button",{className:N.a.Less,disabled:e.filterButtonsDisabled.maxLess,onClick:e.updateFiltersHandler,id:"maxLess"},"Less"),o.a.createElement("div",{className:N.a.Value},e.filterData.filterMax),o.a.createElement("button",{className:N.a.More,disabled:e.filterButtonsDisabled.maxMore,onClick:e.updateFiltersHandler,id:"maxMore"},"More"),o.a.createElement("div",{className:N.a.Star})),o.a.createElement("div",{className:N.a.Apply},o.a.createElement("button",{onClick:e.resetFilter},"Reset filter")))},M=t(17),H=t.n(M),C=t(7),y=t.n(C),k=t(8),x=t.n(k),L=function(e){var a,t,n=null;return e.rating&&0!==e.rating?((a=e.rating)%1===0&&("string"===typeof a&&(a=Number(a)),a=a.toFixed(1)),t=20*e.rating,n=o.a.createElement("div",{className:x.a.Rating},o.a.createElement("div",{className:x.a.RatingNumber},a),o.a.createElement("div",{className:x.a.RatingStars},o.a.createElement("div",{className:x.a.StarsRatingSprite},o.a.createElement("span",{className:x.a.StarsRatingSpriteRating,style:{width:t+"%"}}))))):n=o.a.createElement("div",{className:x.a.NoRating},o.a.createElement("p",null,"No rating yet")),o.a.createElement(o.a.Fragment,null,n)},B=t(22),F=t.n(B),P=function(e){var a;a=e.placeData.photos&&e.placeData.photos[0].getUrl()?e.placeData.photos[0].getUrl({maxWidth:85,maxHeight:85}):F.a;var t,n=o.a.createElement("img",{referrerPolicy:"no-referrer",src:a,alt:"PlacePicture"}),i=e.lastAverageRatings.findIndex(function(a){return a.place_id===e.placeData.place_id});return t=-1!==i?e.lastAverageRatings[i].lastAverageRating:e.placeData.rating,o.a.createElement("div",{className:y.a.ListItem,onClick:e.restaurantDetailsShowHandler},o.a.createElement("div",{className:y.a.PlaceDescription},o.a.createElement("div",{className:y.a.PlaceName},e.placeData.name),o.a.createElement("div",{className:y.a.PlaceVicinity},e.placeData.vicinity),o.a.createElement("div",{className:y.a.AverageRating},o.a.createElement(L,{rating:t}))),o.a.createElement("div",{className:y.a.PlacePhoto},n))},I=function(e){var a;switch(e.listStatus){case"loading":a=o.a.createElement("p",null,"LOADING...");break;case"notFound":a=o.a.createElement("p",{className:H.a.NotFound},"There is no restaurant within 500 meters of the map center. Please move the map to change center of the map.");break;case"notInMapBounds":a=o.a.createElement("p",{className:H.a.NotFound},"There is no restaurants within actual map area. Please decrease zoom level or move the map.");break;case"notInFilterCriteria":a=o.a.createElement("p",{className:H.a.NotFound},"There is no restaurants to display for actual filter criteria. Please change filter criteria or move a map.");break;case"loaded":a=e.googlePlacesFiltered.map(function(a){return o.a.createElement(P,{key:a.place_id,placeData:a,restaurantDetailsShowHandler:e.restaurantDetailsShowHandler.bind(null,a.place_id),lastAverageRatings:e.lastAverageRatings})});break;default:a=null}return o.a.createElement("div",{className:H.a.List},a)},O=t(4),j=t.n(O),T=t(23),z=t.n(T),V=t(24),U=t.n(V),W=t(25),q=t.n(W),G=t(26),Y=t.n(G),J=t(18),Z=t.n(J),K=t(2),Q=t.n(K),X=function(e){for(var a,t,n=[],i=0;i<5;i++)t=i>=e.newReviewData.userRating?0:1,n.push(t);return a=n.map(function(a,t){return 0===a?o.a.createElement("div",{key:t+1,className:Q.a.StarNotRated,id:t+1,onClick:e.newReviewDataChangeHandler}):o.a.createElement("div",{key:t+1,className:Q.a.StarRated,id:t+1,onClick:e.newReviewDataChangeHandler})}),o.a.createElement("div",{className:Q.a.AddReview},o.a.createElement("form",{className:Q.a.Fields},o.a.createElement("div",{className:Q.a.Names},o.a.createElement("div",{className:Q.a.FirstName},o.a.createElement("input",{type:"text",name:"firstName",spellCheck:"false",value:e.newReviewData.firstName,onChange:e.newReviewDataChangeHandler,required:!0}),o.a.createElement("label",null,"First Name *")),o.a.createElement("div",{className:Q.a.LastName},o.a.createElement("input",{type:"text",name:"lastName",spellCheck:"false",value:e.newReviewData.lastName,onChange:e.newReviewDataChangeHandler,required:!0}),o.a.createElement("label",null,"Last Name *"))),o.a.createElement("div",{className:Q.a.Review},o.a.createElement("textarea",{rows:"3",type:"text",name:"review",spellCheck:"false",value:e.newReviewData.review,onChange:e.newReviewDataChangeHandler,required:!0}),o.a.createElement("label",null,"Review *")),o.a.createElement("div",{className:Q.a.UserRating},o.a.createElement("div",{className:Q.a.Description},"Rating"),o.a.createElement("div",{className:Q.a.Stars},a)),o.a.createElement("div",{className:Q.a.Buttons},o.a.createElement("button",{className:Q.a.Add,disabled:e.addReviewButtonDisabled,onClick:e.addReview},"Add"),o.a.createElement("button",{className:Q.a.Cancel,onClick:e.cancelAddingReview},"Cancel"))))},$=t(6),ee=t.n($),ae=function(e){var a;return a=e.reviewData.profile_photo_url?o.a.createElement("img",{referrerPolicy:"no-referrer",src:e.reviewData.profile_photo_url,alt:"AuthorPhoto"}):o.a.createElement("div",{className:ee.a.AuthorLetterContainer},o.a.createElement("span",{className:ee.a.AuthorLetter},e.reviewData.author_name.charAt(0))),o.a.createElement("div",{className:ee.a.ReviewContainer},o.a.createElement("div",{className:ee.a.AuthorPhoto},a),o.a.createElement("div",{className:ee.a.Review},o.a.createElement("div",{className:ee.a.AuthorName},e.reviewData.author_name),o.a.createElement("div",{className:ee.a.ReviewRating},o.a.createElement(L,{rating:e.reviewData.rating})),o.a.createElement("div",{className:ee.a.ReviewText},e.reviewData.text)))},te=function(e){var a,t;e.addingReviewStatus?(t="Reset",a=o.a.createElement(X,{newReviewData:e.newReviewData,newReviewDataChangeHandler:e.newReviewDataChangeHandler,addReviewButtonDisabled:e.addReviewButtonDisabled,addReview:e.addReview,cancelAddingReview:e.cancelAddingReview})):(t="Add",a=null);var n=null;return 0!==e.reviewsData.length&&(n=e.reviewsData.map(function(e,a){return o.a.createElement(ae,{key:a,reviewData:e})})),o.a.createElement("div",{className:Z.a.Reviews},o.a.createElement("div",{className:Z.a.Header},o.a.createElement("p",null,"Reviews"),o.a.createElement("button",{onClick:e.addingReviewShowHandler},t)),a,n)},ne=function(e){function a(){return Object(u.a)(this,a),Object(g.a)(this,Object(v.a)(a).apply(this,arguments))}return Object(p.a)(a,e),Object(m.a)(a,[{key:"componentDidMount",value:function(){document.getElementById("top").scrollIntoView()}},{key:"render",value:function(){var e,a,t=this;"number"===typeof this.props.restaurantDetailsData.place_id?(e=this.props.restaurantDetailsData.lat,a=this.props.restaurantDetailsData.lng):(e=this.props.restaurantDetailsData.geometry.location.lat(),a=this.props.restaurantDetailsData.geometry.location.lng());var n,i,s="https://maps.googleapis.com/maps/api/streetview?size=640x350&location="+e+","+a+"&fov=120&key=AIzaSyCB5-GzZHw_xyz2Aj9-p5XDVEkrIUb1cD8";n=this.props.restaurantDetailsData.placeDetails.formatted_phone_number?this.props.restaurantDetailsData.placeDetails.formatted_phone_number:"Not Available",i=this.props.restaurantDetailsData.placeDetails.website?this.props.restaurantDetailsData.placeDetails.website:"Not Available";var r=[],l=this.props.restaurantDetailsData.rating;if(0!==this.props.newReviews.length){var d=this.props.newReviews.findIndex(function(e){return e.place_id===t.props.restaurantDetailsData.place_id});-1!==d&&this.props.newReviews[d].reviews.forEach(function(e){r.push(e)})}return this.props.restaurantDetailsData.placeDetails.reviews&&this.props.restaurantDetailsData.placeDetails.reviews.forEach(function(e){r.push(e)}),l=0!==r.length?this.props.countAverageRating(r).toFixed(1):0,this.props.getLastAverageRating(l),o.a.createElement("div",{className:j.a.RestaurantDetails},o.a.createElement("div",{className:j.a.Title,id:"top"},o.a.createElement("div",{className:j.a.NameAndClose},o.a.createElement("div",{className:j.a.Name},this.props.restaurantDetailsData.name),o.a.createElement("div",{className:j.a.Close,title:"Close"},o.a.createElement("img",{src:z.a,alt:"closeIcon",onClick:this.props.restaurantDetailsHideHandler}))),o.a.createElement("div",{className:j.a.AverageRating},o.a.createElement(L,{rating:l}))),o.a.createElement("div",{className:j.a.StreetVievContainer},o.a.createElement("img",{src:s,alt:"Static Street View"})),o.a.createElement("div",{className:j.a.AddressInfo},o.a.createElement("img",{src:U.a,alt:"addressIcon"}),o.a.createElement("p",null,this.props.restaurantDetailsData.vicinity)),o.a.createElement("div",{className:j.a.PhoneInfo},o.a.createElement("img",{src:q.a,alt:"phoneIcon"}),o.a.createElement("p",null,n)),o.a.createElement("div",{className:j.a.WebsiteInfo},o.a.createElement("img",{src:Y.a,alt:"websiteIcon"}),o.a.createElement("p",null,o.a.createElement("a",{href:this.props.restaurantDetailsData.placeDetails.website,target:"_blank"},i))),o.a.createElement(te,{reviewsData:r,addingReviewStatus:this.props.addingReviewStatus,addingReviewShowHandler:this.props.addingReviewShowHandler,newReviewData:this.props.newReviewData,newReviewDataChangeHandler:this.props.newReviewDataChangeHandler,addReviewButtonDisabled:this.props.addReviewButtonDisabled,addReview:this.props.addReview,cancelAddingReview:this.props.cancelAddingReview}))}}]),a}(l.Component),ie=function(e){var a=null;return a=e.restaurantDetailsShowStatus?o.a.createElement(o.a.Fragment,null,o.a.createElement(ne,{restaurantDetailsData:e.restaurantDetailsData,restaurantDetailsHideHandler:e.restaurantDetailsHideHandler,addingReviewStatus:e.addingReviewStatus,addingReviewShowHandler:e.addingReviewShowHandler,newReviewData:e.newReviewData,newReviewDataChangeHandler:e.newReviewDataChangeHandler,addReviewButtonDisabled:e.addReviewButtonDisabled,addReview:e.addReview,cancelAddingReview:e.cancelAddingReview,newReviews:e.newReviews,countAverageRating:e.countAverageRating,getLastAverageRating:e.getLastAverageRating})):o.a.createElement(o.a.Fragment,null,o.a.createElement(A,{filterData:e.filterData,filterButtonsDisabled:e.filterButtonsDisabled,updateFiltersHandler:e.updateFiltersHandler,resetFilter:e.resetFilter}),o.a.createElement(I,{googlePlacesFiltered:e.googlePlacesFiltered,listStatus:e.listStatus,restaurantDetailsShowHandler:e.restaurantDetailsShowHandler,lastAverageRatings:e.lastAverageRatings})),o.a.createElement(o.a.Fragment,null,a)},se=t(27),re=t.n(se),le=t(28),oe=t.n(le),de=function(e){return e.addingRestaurantStatus?o.a.createElement("div",{className:oe.a.Backdrop,onClick:e.addingRestaurantHideHandler}):null},ce=function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement(de,{addingRestaurantStatus:e.addingRestaurantStatus,addingRestaurantHideHandler:e.addingRestaurantHideHandler}),o.a.createElement("div",{className:re.a.Modal,style:{transform:e.addingRestaurantStatus?"translateY(0)":"translateY(-100vh)",opacity:e.addingRestaurantStatus?"1":"0"}},e.children))},ue=t(15),me=t.n(ue),ge=function(e){return o.a.createElement("div",{className:me.a.AddRestaurant},o.a.createElement("h1",null,"Now you can add a new restaurant"),o.a.createElement("h2",null,"Please fill up fields and click Add"),o.a.createElement("h2",null,"Field marked with * is required"),o.a.createElement("h3",null,"Adding a new restaurant will reset filter criteria"),o.a.createElement("form",{className:me.a.Fields},o.a.createElement("div",null,o.a.createElement("input",{type:"text",name:"name",spellCheck:"false",value:e.newRestaurantData.name,onChange:e.newRestaurantDataChangeHandler,required:!0}),o.a.createElement("label",null,"Name *")),o.a.createElement("div",null,o.a.createElement("input",{type:"text",name:"phone",spellCheck:"false",value:e.newRestaurantData.phone,onChange:e.newRestaurantDataChangeHandler,required:!0}),o.a.createElement("label",null,"Phone")),o.a.createElement("div",null,o.a.createElement("input",{type:"text",name:"website",spellCheck:"false",value:e.newRestaurantData.website,onChange:e.newRestaurantDataChangeHandler,required:!0}),o.a.createElement("label",null,"Website")),o.a.createElement("div",{className:me.a.Buttons},o.a.createElement("button",{className:me.a.Add,disabled:e.addRestaurantButtonDisabled,onClick:e.addRestaurant},"Add"),o.a.createElement("button",{className:me.a.Cancel,onClick:e.cancelAddingRestaurant},"Cancel"))))},ve=[],pe=[],we={lat:53.799241150620674,lng:-1.5418059473662424};var Re=function(e){function a(){var e,t;Object(u.a)(this,a);for(var l=arguments.length,o=new Array(l),d=0;d<l;d++)o[d]=arguments[d];return(t=Object(g.a)(this,(e=Object(v.a)(a)).call.apply(e,[this].concat(o)))).state={jsonPlaces:[],googlePlaces:[],googlePlacesFiltered:[],listStatus:"loading",restaurantDetailsShowStatus:!1,restaurantDetailsData:null,filter:{filterMin:0,filterMax:5},filterButtonsDisabled:{minLess:!0,minMore:!1,maxLess:!1,maxMore:!0},addingRestaurantStatus:!1,newRestaurantData:{name:"",phone:"",website:""},addRestaurantButtonDisabled:!0,newRestaurants:[],addingReviewStatus:!1,newReviewData:{firstName:"",lastName:"",review:"",userRating:0},addReviewButtonDisabled:!0,newReviews:[],lastAverageRatings:[],geolocationPermission:!0},t.renderMap=function(){!function(e){var a=window.document.getElementsByTagName("script")[0],t=window.document.createElement("script");t.src=e,t.async=!0,t.defer=!0,a.parentNode.insertBefore(t,a)}("https://maps.googleapis.com/maps/api/js?key=AIzaSyCB5-GzZHw_xyz2Aj9-p5XDVEkrIUb1cD8&libraries=places&callback=initMap"),window.initMap=t.initMap},t.initMap=function(){n=new window.google.maps.Map(document.getElementById("map"),{center:we,zoom:16}),navigator.geolocation.getCurrentPosition(function(e){var a={lat:e.coords.latitude,lng:e.coords.longitude};n.setCenter(a),t.setUserMarker(a,n)},function(e){e.code===e.PERMISSION_DENIED&&(t.setUserMarker(we,n),t.setState({geolocationPermission:!1}))}),n.addListener("idle",function(){t.state.restaurantDetailsShowStatus&&t.restaurantDetailsHideHandler(),t.updatePlaces()}),n.addListener("rightclick",function(e){i=e.latLng.lat(),s=e.latLng.lng(),t.addingRestaurantShowHandler()})},t.updatePlaces=function(){t.removeMarkers(),pe=[],t.setState({listStatus:"loading"});var e=n.getCenter(),a=e.lat(),i=e.lng(),s=n.getBounds(),r=[];0!==t.state.newRestaurants.length?(r=Object(D.a)(t.state.newRestaurants),Object(D.a)(t.state.jsonPlaces).forEach(function(e){r.push(e)})):r=Object(D.a)(t.state.jsonPlaces);var l={location:{lat:a,lng:i},radius:"500",type:["restaurant"]};new window.google.maps.places.PlacesService(n).nearbySearch(l,function(e,a){a===window.google.maps.places.PlacesServiceStatus.OK?(e.forEach(function(e){e.rating?e.rating=e.rating.toFixed(1):e.rating=0,r.push(e)}),t.checkVisibilityOnMap(r,s)):t.checkVisibilityOnMap(r,s)})},t.countAverageRating=function(e){var a=e.length,t=0;return e.forEach(function(e){var a=e.rating;t+=a}),t/a},t.checkVisibilityOnMap=function(e,a){e.forEach(function(e){var n=t.findLat(e),i=t.findLng(e);a.contains({lat:n,lng:i})&&pe.push(e)}),0===pe.length?(t.setState({listStatus:"notInMapBounds"}),t.setState({googlePlacesFiltered:[]})):(t.setState({googlePlaces:pe}),0===t.state.filter.filterMin&&5===t.state.filter.filterMax?(t.setState({googlePlacesFiltered:pe}),t.setState({listStatus:"loaded"}),t.addMarkers(pe)):(t.applyFiltersHandler(t.state.filter),t.setState({listStatus:"loaded"})))},t.findLat=function(e){return e.lat?e.lat:e.geometry.location.lat()},t.findLng=function(e){return e.lng?e.lng:e.geometry.location.lng()},t.addMarkers=function(e){var a=new window.google.maps.InfoWindow({});e.forEach(function(e){var i=new window.google.maps.Marker({position:{lat:t.findLat(e),lng:t.findLng(e)},map:n,title:e.name});ve.push(i);var s=document.createElement("div"),r=document.createElement("div");r.style.fontWeight="700",r.innerHTML=e.name;var l=document.createElement("div");l.innerHTML=e.vicinity,s.appendChild(r),s.appendChild(l),i.addListener("click",function(){a.setContent(s),a.open(n,i)})})},t.removeMarkers=function(){if(0!==ve.length){for(var e=0;e<ve.length;e++)ve[e].setMap(null);ve=[]}},t.switchMarkerBounceOn=function(e,a){var t=ve.findIndex(function(t){return t.position.lat()===e&&t.position.lng()===a});ve[t].setAnimation(window.google.maps.Animation.BOUNCE)},t.switchMarkerBounceOff=function(){ve.forEach(function(e){1===e.animation&&e.setAnimation(null)})},t.setUserMarker=function(e,a){new window.google.maps.Marker({position:e,map:a,animation:window.google.maps.Animation.DROP,icon:{url:"http://maps.google.com/mapfiles/ms/icons/green-dot.png"},title:"Your Position",zIndex:100})},t.updateFiltersHandler=function(e){var a=Object(h.a)({},t.state.filter);switch(e.target.id){case"minLess":a.filterMin-=1;break;case"minMore":a.filterMin+=1;break;case"maxLess":a.filterMax-=1;break;case"maxMore":a.filterMax+=1}a.filterMax<a.filterMin&&(a.filterMax=a.filterMin),t.setState({filter:a}),t.filterButtonsDisabledUpdate(a)},t.filterButtonsDisabledUpdate=function(e){var a=Object(h.a)({},t.state.filterButtonsDisabled);e.filterMin>0?a.minLess=!1:0===e.filterMin&&(a.minLess=!0),e.filterMin<5?a.minMore=!1:5===e.filterMin&&(a.minMore=!0),e.filterMax>e.filterMin?a.maxLess=!1:e.filterMax===e.filterMin&&(a.maxLess=!0),e.filterMax<5?a.maxMore=!1:5===e.filterMax&&(a.maxMore=!0),t.setState({filterButtonsDisabled:a}),t.applyFiltersHandler(e)},t.applyFiltersHandler=function(e){var a=e.filterMin,n=e.filterMax,i=[];pe.forEach(function(e){var s,r=t.state.lastAverageRatings.findIndex(function(a){return a.place_id===e.place_id});(s=-1!==r?t.state.lastAverageRatings[r].lastAverageRating:e.rating)>=a&&s<=n&&i.push(e)}),0===i.length?0===pe.length?t.setState({listStatus:"notInMapBounds"}):(t.setState({listStatus:"notInFilterCriteria"}),t.removeMarkers()):(t.setState({googlePlacesFiltered:i}),t.setState({listStatus:"loaded"}),t.removeMarkers(),t.addMarkers(i))},t.resetFilter=function(){if(0!==t.state.filter.filterMin||5!==t.state.filter.filterMax){var e=Object(h.a)({},t.state.filter);e.filterMin=0,e.filterMax=5,t.setState({filter:e}),t.filterButtonsDisabledUpdate(e)}},t.restaurantDetailsShowHandler=function(e){var a;if("number"===typeof e){var i=Object(D.a)(t.state.jsonPlaces),s=i.findIndex(function(a){return a.place_id===e});if(-1!==s)a=i[s];else{var r=Object(D.a)(t.state.newRestaurants);s=r.findIndex(function(a){return a.place_id===e}),a=r[s]}t.setState({restaurantDetailsData:a}),t.setState({restaurantDetailsShowStatus:!0}),t.switchMarkerBounceOn(t.findLat(a),t.findLng(a))}else{var l={placeId:e,fields:["formatted_phone_number","reviews","website"]};new window.google.maps.places.PlacesService(n).getDetails(l,function(n,i){if(i===window.google.maps.places.PlacesServiceStatus.OK){var s=Object(D.a)(t.state.googlePlaces),r=s.findIndex(function(a){return a.place_id===e});(a=s[r]).placeDetails=n,t.setState({restaurantDetailsData:a}),t.setState({restaurantDetailsShowStatus:!0}),t.switchMarkerBounceOn(t.findLat(a),t.findLng(a))}})}},t.restaurantDetailsHideHandler=function(){t.addingReviewHideHandler(),t.setState({restaurantDetailsShowStatus:!1}),t.switchMarkerBounceOff(),t.updateLastAverageRatings()},t.addingRestaurantShowHandler=function(){t.setState({addingRestaurantStatus:!0})},t.addingRestaurantHideHandler=function(){t.resetNewRestaurantData(),t.disableAddRestaurantButton(),t.setState({addingRestaurantStatus:!1})},t.newRestaurantDataChangeHandler=function(e){var a=Object(h.a)({},t.state.newRestaurantData),n=e.target.name,i=e.target.value;a[n]=i,a.name.replace(/\s/g,"").length?t.enableAddRestaurantButton():t.disableAddRestaurantButton(),t.setState({newRestaurantData:a})},t.enableAddRestaurantButton=function(){t.setState({addRestaurantButtonDisabled:!1})},t.disableAddRestaurantButton=function(){t.setState({addRestaurantButtonDisabled:!0})},t.addRestaurant=function(e){e.preventDefault();var a=0;(0!==t.state.newRestaurants.length?Object(D.a)(t.state.newRestaurants):Object(D.a)(t.state.jsonPlaces)).forEach(function(e){e.place_id>a&&(a=e.place_id)});var r={};if(r.place_id=a+1,r.lat=i,r.lng=s,r.name=t.state.newRestaurantData.name,r.placeDetails={},t.state.newRestaurantData.phone&&(r.placeDetails.formatted_phone_number=t.state.newRestaurantData.phone),t.state.newRestaurantData.website){r.placeDetails.website=t.state.newRestaurantData.website;if(!/^http:\/\/|^https:\/\//.test(r.placeDetails.website)){r.placeDetails.website="http://"+r.placeDetails.website}}r.rating=0;var l="Address not available",o={location:{lat:i,lng:s}};new window.google.maps.Geocoder(n).geocode(o,function(e,a){if("OK"===a&&e[0]){for(var o="",d="",c="",u="",m=0;m<e[0].address_components.length;m++)for(var g=0;g<e[0].address_components[m].types.length;g++)switch(e[0].address_components[m].types[g]){case"street_number":o=e[0].address_components[m].long_name;break;case"route":d=e[0].address_components[m].long_name;break;case"postal_town":c=e[0].address_components[m].long_name;break;case"premise":u=e[0].address_components[m].long_name}""!==o&&""!==d&&""!==c&&(l=o+" "+d+", "+c),""===o&&""!==u&&""!==d&&""!==c&&(l=u+", "+d+", "+c)}r.vicinity=l;var v=Object(D.a)(t.state.newRestaurants);v.unshift(r),t.setState({newRestaurants:v}),t.updatePlaces();var p=new window.google.maps.LatLng(i,s);n.panTo(p),t.addingRestaurantHideHandler()}),t.resetFilter()},t.cancelAddingRestaurant=function(e){e.preventDefault(),t.resetNewRestaurantData(),t.addingRestaurantHideHandler()},t.resetNewRestaurantData=function(){t.setState({newRestaurantData:{name:"",phone:"",website:""}})},t.addingReviewShowHandler=function(){t.resetNewReviewData(),t.disableAddReviewButton(),t.setState({addingReviewStatus:!0})},t.addingReviewHideHandler=function(){t.setState({addingReviewStatus:!1})},t.newReviewDataChangeHandler=function(e){var a=Object(h.a)({},t.state.newReviewData);if(e.target.name){var n=e.target.name,i=e.target.value;a[n]=i}else{var s=e.target.id;a.userRating=s}0!==a.firstName.length&&a.firstName.replace(/\s/g,"").length&&0!==a.lastName.length&&a.lastName.replace(/\s/g,"").length&&0!==a.review.length&&a.review.replace(/\s/g,"").length&&0!==a.userRating?t.enableAddReviewButton():t.disableAddReviewButton(),t.setState({newReviewData:a})},t.enableAddReviewButton=function(){t.setState({addReviewButtonDisabled:!1})},t.disableAddReviewButton=function(){t.setState({addReviewButtonDisabled:!0})},t.addReview=function(e){e.preventDefault();var a=Object(h.a)({},t.state.newReviewData),n=Object(D.a)(t.state.newReviews),i=t.state.restaurantDetailsData.place_id,s=a.firstName+" "+a.lastName,r=a.userRating,l=a.review,o={};o.author_name=s,o.rating=Number(r),o.text=l;var d=n.findIndex(function(e){return e.place_id===i});if(-1===d){var c={};c.place_id=i,c.reviews=[],c.reviews.push(o),n.push(c)}else n[d].reviews.unshift(o);t.setState({newReviews:n}),t.addingReviewHideHandler()},t.cancelAddingReview=function(e){e.preventDefault(),t.addingReviewHideHandler()},t.resetNewReviewData=function(){t.setState({newReviewData:{firstName:"",lastName:"",review:"",userRating:0}})},t.getLastAverageRating=function(e){r=e},t.updateLastAverageRatings=function(){var e=Object(D.a)(t.state.lastAverageRatings),a=e.findIndex(function(e){return e.place_id===t.state.restaurantDetailsData.place_id});if(-1===a){var n={};n.place_id=t.state.restaurantDetailsData.place_id,n.lastAverageRating=r,e.push(n)}else e[a].lastAverageRating=r;t.setState({lastAverageRatings:e},function(){return t.applyFiltersHandler(t.state.filter)})},t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this,a=t(35);a.jsonRestaurants.forEach(function(a){var t=e.countAverageRating(a.placeDetails.reviews);a.rating=t}),this.setState({jsonPlaces:a.jsonRestaurants},this.renderMap())}},{key:"render",value:function(){var e=null;return this.state.geolocationPermission||(e=o.a.createElement("div",{className:b.a.GeoInfo},o.a.createElement("p",null,"We don't have access to your location. If you let us to have it, please change settings and reload the page"))),o.a.createElement("div",{className:b.a.MapContainer},o.a.createElement(ce,{addingRestaurantStatus:this.state.addingRestaurantStatus,addingRestaurantHideHandler:this.addingRestaurantHideHandler},o.a.createElement(ge,{addRestaurant:this.addRestaurant,cancelAddingRestaurant:this.cancelAddingRestaurant,newRestaurantData:this.state.newRestaurantData,newRestaurantDataChangeHandler:this.newRestaurantDataChangeHandler,addRestaurantButtonDisabled:this.state.addRestaurantButtonDisabled})),e,o.a.createElement("div",{className:b.a.Map,id:"map"}),o.a.createElement("div",{className:b.a.SideBar},o.a.createElement(ie,{googlePlacesFiltered:this.state.googlePlacesFiltered,listStatus:this.state.listStatus,filterData:this.state.filter,filterButtonsDisabled:this.state.filterButtonsDisabled,updateFiltersHandler:this.updateFiltersHandler,resetFilter:this.resetFilter,restaurantDetailsShowStatus:this.state.restaurantDetailsShowStatus,restaurantDetailsShowHandler:this.restaurantDetailsShowHandler,restaurantDetailsHideHandler:this.restaurantDetailsHideHandler,restaurantDetailsData:this.state.restaurantDetailsData,addingReviewStatus:this.state.addingReviewStatus,addingReviewShowHandler:this.addingReviewShowHandler,newReviewData:this.state.newReviewData,newReviewDataChangeHandler:this.newReviewDataChangeHandler,addReviewButtonDisabled:this.state.addReviewButtonDisabled,addReview:this.addReview,cancelAddingReview:this.cancelAddingReview,newReviews:this.state.newReviews,countAverageRating:this.countAverageRating,getLastAverageRating:this.getLastAverageRating,lastAverageRatings:this.state.lastAverageRatings})))}}]),a}(l.Component),fe=function(){return o.a.createElement("div",{className:_.a.Layout},o.a.createElement("div",{className:_.a.Header},o.a.createElement("div",{className:_.a.Title},o.a.createElement("h1",null,"Restaurant Review")),o.a.createElement("div",{className:_.a.Position},o.a.createElement("div",{className:_.a.Marker},o.a.createElement("img",{src:"http://maps.google.com/mapfiles/ms/icons/green-dot.png",alt:"positionMarker"})),o.a.createElement("div",{className:_.a.Description},o.a.createElement("h2",null," - Your position"))),o.a.createElement("div",{className:_.a.Info},o.a.createElement("div",{className:_.a.InfoContent},o.a.createElement("h2",null,"Right click on a map to add restaurant"),o.a.createElement("h3",null,"To display restaurants with no rating yet use 0 in filter")))),o.a.createElement("div",{className:_.a.Main},o.a.createElement(Re,null)))},_e=function(e){function a(){return Object(u.a)(this,a),Object(g.a)(this,Object(v.a)(a).apply(this,arguments))}return Object(p.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){return o.a.createElement("div",{className:R.a.App},o.a.createElement(fe,null))}}]),a}(l.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(_e,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[29,1,2]]]);
//# sourceMappingURL=main.e46139aa.chunk.js.map